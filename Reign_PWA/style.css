:root{--bg:#0b0f17;--fg:#e5e7eb;--muted:#94a3b8;--card:#111827;--accent:#7c3aed;--good:#10b981;--warn:#f59e0b;--border:#1f2937}
*{box-sizing:border-box}html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter}
.app-header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border);position:sticky;top:0;background:linear-gradient(180deg,rgba(11,15,23,.95),rgba(11,15,23,.85));backdrop-filter:saturate(140%) blur(8px);z-index:9}
.brand{display:flex;gap:8px;align-items:center;font-weight:700}.crown{color:var(--accent)}
.level-wrap{display:flex;gap:10px;font-size:12px;color:var(--muted)}
.view{display:none;padding:16px;max-width:820px;margin:0 auto}.view.active{display:block}
h2{margin:8px 0 12px 0;font-size:20px}.cards{display:grid;gap:10px}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px}
.card .title{font-weight:600;margin-bottom:6px}.card .meta{font-size:12px;color:var(--muted)}
.btn{border:1px solid var(--border);background:#0f172a;color:var(--fg);padding:8px 10px;border-radius:10px;font-weight:600}
.btn.good{border-color:#134e4a;background:#062e2a}.btn.warn{border-color:#4f3421;background:#2a1a09}
.hint{color:var(--muted);font-size:12px;margin-top:8px}
.form-row,.form-col{display:flex;gap:8px;flex-wrap:wrap}.form-col{flex-direction:column;max-width:560px}
input,select,button{border-radius:10px;border:1px solid var(--border);background:#0f172a;color:#fff;padding:10px 12px}
button{cursor:pointer;font-weight:700}button.danger{border-color:#4c1d1d;background:#2a0a0a;color:#fca5a5}
nav.tabbar{position:fixed;bottom:0;left:0;right:0;background:#0b0f17;border-top:1px solid var(--border);display:grid;grid-template-columns:repeat(4,1fr)}
nav.tabbar button{padding:12px 6px;border:0;background:transparent;color:var(--muted);font-weight:700}
nav.tabbar button.active{color:#fff;border-top:2px solid var(--accent)}
.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.stat{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px}
.stat .label{font-size:12px;color:var(--muted)}.stat .value{font-weight:800;font-size:20px}
.badge-row{display:flex;gap:8px;flex-wrap:wrap}.badge{border:1px dashed var(--border);padding:8px;border-radius:999px;font-size:12px;color:var(--muted)}
#weekly-chart{width:100%;max-width:720px;border:1px solid var(--border);border-radius:12px;background:var(--card);padding:6px}
details{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px;margin-bottom:10px}summary{cursor:pointer;font-weight:700}
.habit-controls{display:flex;gap:8px;align-items:center;margin-top:6px}input[type="number"]{max-width:160px}
.toast{position:fixed;bottom:72px;left:50%;transform:translateX(-50%);background:#111827;color:#e5e7eb;border:1px solid #1f2937;padding:8px 12px;border-radius:10px;opacity:0;transition:opacity .2s, transform .2s;pointer-events:none}
.toast.show{opacity:1;transform:translate(-50%,-6px)}